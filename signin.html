<!DOCTYPE html>
<html>
<head>
    <title>Sign In</title>
</head>
<body>
    <h1>Sign In</h1>
    <p>Sign in with your Google account.</p>
    <button id="google-sign-in">Sign In with Google</button>

    <!-- Include Firebase and Firebase Authentication using CDN links -->
    <script src="https://www.gstatic.com/firebasejs/10.5.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.5.0/firebase-auth.js"></script>

    <script>
        // Initialize Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyADU9mE19sCAgybueA1CjB4pGMa7ALN0-M",
            authDomain: "wuscochat.firebaseapp.com",
            databaseURL: "https://wuscochat-default-rtdb.firebaseio.com",
            projectId: "wuscochat",
            storageBucket: "wuscochat.appspot.com",
            messagingSenderId: "1092324424182",
            appId: "1:1092324424182:web:6c7e02de473063660e2fd7"
        };
        firebase.initializeApp(firebaseConfig);

        // Function to handle Google Sign-In
        function handleGoogleSignIn() {
            const auth = firebase.auth();
            const googleProvider = new firebase.auth.GoogleAuthProvider();

            auth.signInWithPopup(googleProvider)
                .then((result) => {
                    const user = result.user;
                    const userEmail = user.email;

                    const allowedEmails = ["dolangavin448@gmail.com", "user2@example.com"];
                    if (allowedEmails.includes(userEmail)) {
                        // Set a cookie to indicate successful sign-in
                        document.cookie = "signed_in=true; expires=Thu, 01 Jan 2099 00:00:00 UTC; path=/";
                        // Redirect the user to another page, e.g., the chat page.
                        window.location.href = "chat.html";
                    } else {
                        // The user is not allowed. Redirect them to another page.
                        window.location.href = "https://www.example.com";
                    }
                })
                .catch((error) => {
                    console.error(error);
                });
        }

        // Add an event listener to the "Sign In with Google" button
        document.getElementById('google-sign-in').addEventListener('click', handleGoogleSignIn);
    </script>
</body>
</html>
